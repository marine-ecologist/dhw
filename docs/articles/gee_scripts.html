<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Coral Reef Watch Heat Stress Products in Google Earth Engine • dhw</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="gee_scripts_files/libs/quarto-html/popper.min.js"></script><script src="gee_scripts_files/libs/quarto-html/tippy.umd.min.js"></script><link href="gee_scripts_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="gee_scripts_files/libs/quarto-html/light-border.css" rel="stylesheet">
<script src="gee_scripts_files/libs/quarto-diagram/mermaid.min.js"></script><script src="gee_scripts_files/libs/quarto-diagram/mermaid-init.js"></script><link href="gee_scripts_files/libs/quarto-diagram/mermaid.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Coral Reef Watch Heat Stress Products in Google Earth Engine">
<meta property="og:image" content="https://marine-ecologist.github.io/dhw/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dhw</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-r" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">R</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-r">
<li><a class="dropdown-item" href="../articles/calculating_climatologies.html">1. Calculating Degree Heating Weeks</a></li>
    <li><a class="dropdown-item" href="../articles/validating_climatologies.html">2. Reproducible Code &amp; validating DHW climatologies</a></li>
    <li><a class="dropdown-item" href="../articles/extracting_data.html">3. Downloading SST and spatial data</a></li>
    <li><a class="dropdown-item" href="../articles/visualising_outputs.html">4. Visualising outputs from dhw</a></li>
    <li><a class="dropdown-item" href="../articles/dhw_extended.html">5. Extending the DHW metric</a></li>
    <li><a class="dropdown-item" href="../articles/hindcast.html">6. Hindcasting DHW records</a></li>
    <li><a class="dropdown-item" href="../articles/changepoint.html">7. Bayesian changepoint detection and DHW</a></li>
  </ul>
</li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-gee" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">GEE</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-gee">
<li><a class="dropdown-item" href="../articles/gee_scripts.html">1. Calculating DHW in Google Earth Engine</a></li>
    <li><a class="dropdown-item" href="../articles/gee_pipeline.html">2. Google Earth Engine pipeline for OISST</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Coral Reef Watch Heat Stress Products in Google Earth Engine</h1>
      <p class="subtitle">Implementation of Skirving et al. (2020) using NOAA OISST</p>




      <div class="d-none name"><code></code></div>
    </div>






    <section class="level2"><h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>This document describes five Google Earth Engine (GEE) JavaScript scripts that implement the Coral Reef Watch (CRW) heat stress product suite following the methodology of <span class="citation" data-cites="skirving2020">@skirving2020</span>. The scripts compute, for each grid cell within a defined region of interest:</p>
<ol type="1">
<li>
<strong>Monthly Mean (MM) Climatology</strong> — 12 regression-adjusted SST values</li>
<li>
<strong>Maximum Monthly Mean (MMM) Climatology</strong> — the annual thermal maximum</li>
<li>
<strong>Daily Climatology (DC)</strong> — 366-day interpolated baseline</li>
<li>
<strong>SST Anomaly</strong> — departure from the daily climatological mean</li>
<li>
<strong>Coral Bleaching HotSpot (HS)</strong> — instantaneous stress above MMM</li>
<li>
<strong>Degree Heating Weeks (DHW)</strong> — accumulated thermal stress over 12 weeks</li>
</ol>
<p>All scripts use the <strong>NOAA CDR OISST v02r01</strong> dataset (<code>NOAA/CDR/OISST/V2_1</code>) at 0.25° spatial resolution, available in the GEE public data catalogue.</p>
<section class="level3"><h3 id="region-of-interest">Region of Interest<a class="anchor" aria-label="anchor" href="#region-of-interest"></a>
</h3>
<p>The region of interest covers the Great Barrier Reef:</p>
<pre><code>xmin: 141.0958  ymin: -24.70584
xmax: 153.2032  ymax:  -8.926405</code></pre>
<p>Defined in each script as:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> ROI <span class="op">=</span> ee<span class="op">.</span><span class="at">Geometry</span><span class="op">.</span><span class="fu">Rectangle</span>([<span class="fl">141.0958</span><span class="op">,</span> <span class="op">-</span><span class="fl">24.70584</span><span class="op">,</span> <span class="fl">153.2032</span><span class="op">,</span> <span class="op">-</span><span class="fl">8.926405</span>])<span class="op">;</span></span></code></pre></div>
<p>All output images are clipped to this ROI via <code>.clip(ROI)</code> to restrict computation and display.</p>
</section><section class="level3"><h3 id="important-note-on-oisst-resolution">Important Note on OISST Resolution<a class="anchor" aria-label="anchor" href="#important-note-on-oisst-resolution"></a>
</h3>
<p>The operational CRW products use <strong>CoralTemp</strong> at 0.05° (~5 km) resolution, blending geostationary and polar-orbiting satellite SST. This implementation uses <strong>OISST at 0.25° (~25 km)</strong>, which is the highest-resolution daily SST product available in GEE. Results will differ from official CRW products in absolute values but follow the identical methodology.</p>
<div id="tbl-comparison" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-tbl"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-comparison-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table 1: Comparison of operational CRW products with this GEE implementation.
</figcaption><div aria-describedby="tbl-comparison-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table caption-top">
<thead><tr class="header">
<th>Feature</th>
<th>CRW v3.1</th>
<th>This Implementation</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>SST source</td>
<td>CoralTemp (5 km)</td>
<td>NOAA OISST (25 km)</td>
</tr>
<tr class="even">
<td>Resolution</td>
<td>0.05°</td>
<td>0.25°</td>
</tr>
<tr class="odd">
<td>Gap filling</td>
<td>Multi-sensor blend</td>
<td>OI interpolation</td>
</tr>
<tr class="even">
<td>Platform</td>
<td>Custom pipeline</td>
<td>Google Earth Engine</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</section></section><section class="level2"><h2 id="script-01-monthly-mean-and-maximum-monthly-mean-climatology">Script 01: Monthly Mean and Maximum Monthly Mean Climatology<a class="anchor" aria-label="anchor" href="#script-01-monthly-mean-and-maximum-monthly-mean-climatology"></a>
</h2>
<p><strong>File:</strong> <code>01_mm_mmm_climatology.js</code></p>
<section class="level3"><h3 id="method">Method<a class="anchor" aria-label="anchor" href="#method"></a>
</h3>
<p>The Monthly Mean (MM) climatology is a set of 12 SST values representing the regression-adjusted average SST for each calendar month, computed over the period 1985–2012.</p>
<p>For each month <span class="math inline">\(m \in \{1, 2, \ldots, 12\}\)</span>:</p>
<ol type="1">
<li>Compute the monthly mean SST for each year <span class="math inline">\(y \in \{1985, \ldots, 2012\}\)</span>, yielding 28 values.</li>
<li>Apply ordinary least squares (OLS) linear regression: <span class="math display">\[\overline{\text{SST}}_{m,y} = \beta_0 + \beta_1 \cdot y + \varepsilon\]</span>
</li>
<li>Evaluate the regression at the target year <span class="math inline">\(y^* = 1988.2857\)</span>: <span class="math display">\[\text{MM}_m = \hat{\beta}_0 + \hat{\beta}_1 \cdot 1988.2857\]</span>
</li>
</ol>
<p>The target year 1988.2857 is the mean of the years used in the original CRW climatology (1985–1990 and 1993), chosen to maintain consistency across product versions.</p>
<p>The <strong>Maximum Monthly Mean</strong> is then:</p>
<p><span class="math display">\[\text{MMM} = \max_{m=1}^{12} \text{MM}_m\]</span></p>
<p>The MMM represents the warmest monthly climatological temperature at each pixel and serves as the threshold above which thermal stress is defined.</p>
</section><section class="level3"><h3 id="memory-optimisation">Memory Optimisation<a class="anchor" aria-label="anchor" href="#memory-optimisation"></a>
</h3>
<p>OISST images are global single-tile rasters. A naive nested mapping over 28 years × 12 months creates a 336-image collection that exceeds GEE’s user memory limit. The script avoids this by processing each month independently in a client-side loop:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">computeMMForMonth</span>(month) {</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Loads only 28 images (one per year for this month)</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Runs regression and returns a single image</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> mmImages <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (<span class="kw">var</span> m <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> m <span class="op">&lt;=</span> <span class="dv">12</span><span class="op">;</span> m<span class="op">++</span>) {</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  mmImages<span class="op">.</span><span class="fu">push</span>(<span class="fu">computeMMForMonth</span>(m)<span class="op">.</span><span class="fu">rename</span>(<span class="st">'mm_'</span> <span class="op">+</span> <span class="op">...</span>))<span class="op">;</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>This ensures GEE never holds more than 28 images in memory simultaneously.</p>
</section><section class="level3"><h3 id="outputs">Outputs<a class="anchor" aria-label="anchor" href="#outputs"></a>
</h3>
<ul>
<li>
<code>mmMultiBand</code>: 12-band image (<code>mm_01</code> to <code>mm_12</code>), one per calendar month</li>
<li>
<code>mmm</code>: single-band image, the per-pixel maximum of the 12 MM values</li>
</ul>
<p>Both are exported as EE assets and GeoTIFFs for reuse in subsequent scripts.</p>
</section></section><section class="level2"><h2 id="script-02-daily-climatology">Script 02: Daily Climatology<a class="anchor" aria-label="anchor" href="#script-02-daily-climatology"></a>
</h2>
<p><strong>File:</strong> <code>02_daily_climatology.js</code></p>
<section class="level3"><h3 id="method-1">Method<a class="anchor" aria-label="anchor" href="#method-1"></a>
</h3>
<p>The 12 MM values are interpolated to produce a daily climatology (DC) of 366 values (one per day of year, including leap day). Each MM value is assigned to the 15th of its corresponding month:</p>
<div id="tbl-anchors" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-tbl"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-anchors-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table 2: Day-of-year anchor points for the 15th of each month (non-leap year).
</figcaption><div aria-describedby="tbl-anchors-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table caption-top" style="width:100%;">
<colgroup>
<col style="width: 10%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
</colgroup>
<thead><tr class="header">
<th>Month</th>
<th>Jan</th>
<th>Feb</th>
<th>Mar</th>
<th>Apr</th>
<th>May</th>
<th>Jun</th>
<th>Jul</th>
<th>Aug</th>
<th>Sep</th>
<th>Oct</th>
<th>Nov</th>
<th>Dec</th>
</tr></thead>
<tbody><tr class="odd">
<td>Anchor DOY</td>
<td>15</td>
<td>46</td>
<td>74</td>
<td>105</td>
<td>135</td>
<td>166</td>
<td>196</td>
<td>227</td>
<td>258</td>
<td>288</td>
<td>319</td>
<td>349</td>
</tr></tbody>
</table>
</div>
</figure>
</div>
<p>For any day-of-year <span class="math inline">\(d\)</span> falling between anchor points <span class="math inline">\(d_{\text{lo}}\)</span> (month <span class="math inline">\(m_{\text{lo}}\)</span>) and <span class="math inline">\(d_{\text{hi}}\)</span> (month <span class="math inline">\(m_{\text{hi}}\)</span>):</p>
<p><span class="math display">\[\text{DC}_d = \text{MM}_{m_{\text{lo}}} +
\left(\text{MM}_{m_{\text{hi}}} - \text{MM}_{m_{\text{lo}}}\right)
\cdot \frac{d - d_{\text{lo}}}{d_{\text{hi}} - d_{\text{lo}}}\]</span></p>
<p>The interpolation wraps around from December (DOY 349) to January (DOY 15) by introducing virtual anchor points at DOY −16 (December of the “previous year”) and DOY 380 (January of the “next year”).</p>
</section><section class="level3"><h3 id="output">Output<a class="anchor" aria-label="anchor" href="#output"></a>
</h3>
<ul>
<li>
<code>dcImage</code>: 366-band image (<code>dc_001</code> to <code>dc_366</code>), each band being the interpolated SST climatology for that day of year.</li>
</ul></section></section><section class="level2"><h2 id="script-03-sst-anomaly">Script 03: SST Anomaly<a class="anchor" aria-label="anchor" href="#script-03-sst-anomaly"></a>
</h2>
<p><strong>File:</strong> <code>03_sst_anomaly.js</code></p>
<section class="level3"><h3 id="method-2">Method<a class="anchor" aria-label="anchor" href="#method-2"></a>
</h3>
<p>The daily SST Anomaly is the departure of the observed SST from the daily climatological mean:</p>
<p><span class="math display">\[\text{SST Anomaly}_i = \text{SST}_i - \text{DC}_d\]</span></p>
<p>where <span class="math inline">\(i\)</span> is the observation date and <span class="math inline">\(d\)</span> is the corresponding day of year.</p>
<p>The script uses server-side array indexing to select the correct DC band for each image’s day of year:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> dcArray <span class="op">=</span> dcAllBands<span class="op">.</span><span class="fu">toArray</span>()<span class="op">;</span>  <span class="co">// 366-element array image</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> sstAnomalyCollection <span class="op">=</span> oisstAnalysis<span class="op">.</span><span class="fu">map</span>(<span class="kw">function</span>(img) {</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> doy <span class="op">=</span> ee<span class="op">.</span><span class="fu">Date</span>(img<span class="op">.</span><span class="fu">get</span>(<span class="st">'system:time_start'</span>))</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">getRelative</span>(<span class="st">'day'</span><span class="op">,</span> <span class="st">'year'</span>)<span class="op">.</span><span class="fu">add</span>(<span class="dv">1</span>)<span class="op">.</span><span class="fu">min</span>(<span class="dv">366</span>)<span class="op">;</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> dcForDay <span class="op">=</span> dcArray</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">arraySlice</span>(<span class="dv">0</span><span class="op">,</span> doy<span class="op">.</span><span class="fu">subtract</span>(<span class="dv">1</span>)<span class="op">,</span> doy)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">arrayProject</span>([<span class="dv">0</span>])</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">arrayFlatten</span>([[<span class="st">'dc_sst'</span>]])<span class="op">;</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> img<span class="op">.</span><span class="fu">subtract</span>(dcForDay)<span class="op">.</span><span class="fu">rename</span>(<span class="st">'sst_anomaly'</span>)<span class="op">;</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
</section><section class="level3"><h3 id="output-1">Output<a class="anchor" aria-label="anchor" href="#output-1"></a>
</h3>
<ul>
<li>
<code>sstAnomalyCollection</code>: daily SST anomaly images for the analysis period. Positive values indicate warmer-than-average conditions; negative values indicate cooler-than-average conditions.</li>
</ul></section></section><section class="level2"><h2 id="script-04-coral-bleaching-hotspot">Script 04: Coral Bleaching HotSpot<a class="anchor" aria-label="anchor" href="#script-04-coral-bleaching-hotspot"></a>
</h2>
<p><strong>File:</strong> <code>04_hotspot.js</code></p>
<section class="level3"><h3 id="method-3">Method<a class="anchor" aria-label="anchor" href="#method-3"></a>
</h3>
<p>The Coral Bleaching HotSpot (HS) measures the instantaneous thermal stress above the climatological maximum:</p>
<p><span class="math display">\[\text{HS}_i = \max(\text{SST}_i - \text{MMM},\; 0)\]</span></p>
<p>The HotSpot is always zero or positive. When the observed SST is below the MMM, the HotSpot is set to zero — there is no negative thermal stress in this framework.</p>
<p>The MMM is a static field (one value per pixel), whereas the HotSpot varies daily with the observed SST.</p>
</section><section class="level3"><h3 id="interpretation">Interpretation<a class="anchor" aria-label="anchor" href="#interpretation"></a>
</h3>
<div id="tbl-hotspot" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-tbl"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-hotspot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table 3: HotSpot interpretation thresholds.
</figcaption><div aria-describedby="tbl-hotspot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table caption-top">
<thead><tr class="header">
<th>HotSpot (°C)</th>
<th>Interpretation</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>No thermal stress</td>
</tr>
<tr class="even">
<td>0 – 1</td>
<td>Below bleaching watch threshold</td>
</tr>
<tr class="odd">
<td>≥ 1</td>
<td>Significant thermal stress; contributes to DHW</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</section><section class="level3"><h3 id="output-2">Output<a class="anchor" aria-label="anchor" href="#output-2"></a>
</h3>
<ul>
<li>
<code>hotspotCollection</code>: daily HotSpot images (°C above MMM).</li>
</ul></section></section><section class="level2"><h2 id="script-05-degree-heating-weeks">Script 05: Degree Heating Weeks<a class="anchor" aria-label="anchor" href="#script-05-degree-heating-weeks"></a>
</h2>
<p><strong>File:</strong> <code>05_dhw.js</code></p>
<section class="level3"><h3 id="method-4">Method<a class="anchor" aria-label="anchor" href="#method-4"></a>
</h3>
<p>The Degree Heating Week (DHW) product accumulates thermal stress over a rolling 12-week (84-day) window. Only HotSpot values ≥ 1°C contribute to the summation. Daily values are divided by 7 to convert from degree-days to degree-weeks:</p>
<p><span class="math display">\[\text{DHW}_i = \sum_{n=i-83}^{i} \frac{\text{HS}_n}{7},
\quad \text{where } \text{HS}_n \geq 1\,°\text{C}\]</span></p>
</section><section class="level3"><h3 id="worked-example">Worked Example<a class="anchor" aria-label="anchor" href="#worked-example"></a>
</h3>
<p>If the 84-day window ending on 1 June 2024 contained only four daily HotSpot values above zero — 1.0, 2.0, 0.8, and 1.2°C — then:</p>
<ul>
<li>0.8°C is excluded (below the 1°C threshold)</li>
<li>Contributing values: 1.0, 2.0, 1.2°C</li>
<li><span class="math inline">\(\text{DHW} = (1.0 + 2.0 + 1.2) / 7 = 0.6\,°\text{C-weeks}\)</span></li>
</ul></section><section class="level3"><h3 id="bleaching-thresholds">Bleaching Thresholds<a class="anchor" aria-label="anchor" href="#bleaching-thresholds"></a>
</h3>
<div id="tbl-bleaching" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-tbl"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-bleaching-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table 4: DHW bleaching thresholds following <span class="citation" data-cites="liu2014">@liu2014</span>.
</figcaption><div aria-describedby="tbl-bleaching-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table caption-top" style="width:100%;">
<colgroup>
<col style="width: 34%">
<col style="width: 28%">
<col style="width: 36%">
</colgroup>
<thead><tr class="header">
<th>DHW (°C-weeks)</th>
<th>Alert Level</th>
<th>Expected Impact</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>No stress</td>
<td>—</td>
</tr>
<tr class="even">
<td>0 – 4</td>
<td>Watch</td>
<td>Possible bleaching</td>
</tr>
<tr class="odd">
<td>4 – 8</td>
<td>Warning</td>
<td>Significant bleaching likely</td>
</tr>
<tr class="even">
<td>≥ 8</td>
<td>Alert Level 2</td>
<td>Severe bleaching and mortality likely</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</section><section class="level3"><h3 id="computational-considerations">Computational Considerations<a class="anchor" aria-label="anchor" href="#computational-considerations"></a>
</h3>
<p>Computing DHW for every day of a year-long analysis period creates 365 derived images, each requiring the summation of an 84-image window. For long periods or large regions, consider:</p>
<ul>
<li>Processing in monthly batches</li>
<li>Exporting the daily HotSpot collection first, then computing DHW offline</li>
<li>Using the automated pipeline (see companion document)</li>
</ul></section><section class="level3"><h3 id="output-3">Output<a class="anchor" aria-label="anchor" href="#output-3"></a>
</h3>
<ul>
<li>
<code>dhwCollection</code>: daily DHW images (°C-weeks) for the analysis period.</li>
</ul></section></section><section class="level2"><h2 id="data-flow-summary">Data Flow Summary<a class="anchor" aria-label="anchor" href="#data-flow-summary"></a>
</h2>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div id="fig-dataflow" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-fig"><div aria-describedby="fig-dataflow-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>
<pre class="mermaid mermaid-js" data-label="fig-dataflow">flowchart LR
    OISST[NOAA OISST&lt;br/&gt;Daily SST] --&gt; MM[Monthly Mean&lt;br/&gt;12 values]
    MM --&gt; MMM[Maximum&lt;br/&gt;Monthly Mean]
    MM --&gt; DC[Daily Climatology&lt;br/&gt;366 values]
    OISST --&gt; ANOM[SST Anomaly&lt;br/&gt;SST − DC]
    DC --&gt; ANOM
    OISST --&gt; HS[HotSpot&lt;br/&gt;max SST−MMM, 0]
    MMM --&gt; HS
    HS --&gt; DHW[Degree Heating Weeks&lt;br/&gt;84-day Σ HS/7, HS≥1]
</pre>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-dataflow-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 1: Data flow from raw OISST to DHW products.
</figcaption></figure>
</div>
</div>
</div>
</section><section class="level2"><h2 id="running-the-scripts">Running the Scripts<a class="anchor" aria-label="anchor" href="#running-the-scripts"></a>
</h2>
<ol type="1">
<li>Open the <a href="https://code.earthengine.google.com/" class="external-link">GEE Code Editor</a>
</li>
<li>Paste <code>01_mm_mmm_climatology.js</code> → Run → Execute export tasks in the Tasks tab</li>
<li>Update asset paths in scripts 02–05 to point to your exported MM/MMM assets</li>
<li>Run scripts 02–05 in sequence</li>
</ol>
<p>For the asset path, replace the placeholder:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">// var mmm = ee.Image('projects/YOUR-GEE-PROJECT/assets/coral_dhw/mmm_climatology');</span></span></code></pre></div>
<p>with your actual asset path after exporting from Script 01.</p>
</section><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config);
    }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/marine.ecologist/" class="external-link">George Roff</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
